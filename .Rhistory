output = FALSE)
S2vis_npct <- plsrPlot(N..weight. ~ visS2_xvars, data = fullS2, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S4vis_npct <- plsrPlot(N..weight. ~ visS4_xvars, data = fullS4, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S2S4nir_npct <- plsrPlot(N..weight. ~ nirS2S4_xvars, data = fullS2S4, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S2nir_npct <- plsrPlot(N..weight. ~ nirS2_xvars, data = fullS2, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S4nir_npct <- plsrPlot(N..weight. ~ nirS4_xvars, data = fullS4, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S2S4vnir_npct <- plsrPlot(N..weight. ~ vnirS2S4_xvars, data = fullS2S4, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S2vnir_npct <- plsrPlot(N..weight. ~ vnirS2_xvars, data = fullS2, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S4vnir_npct <- plsrPlot(N..weight. ~ vnirS4_xvars, data = fullS4, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S2S4swir_npct <- plsrPlot(N..weight. ~ swirS2S4_xvars, data = fullS2S4, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S2swir_npct <- plsrPlot(N..weight. ~ swirS2_xvars, data = fullS2, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S4swir_npct <- plsrPlot(N..weight. ~ swirS4_xvars, data = fullS4, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S2S4full_npct <- plsrPlot(N..weight. ~ fullS2S4_xvars, data = fullS2S4, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S2full_npct <- plsrPlot(N..weight. ~ fullS2_xvars, data = fullS2, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
S4full_npct <- plsrPlot(N..weight. ~ fullS4_xvars, data = fullS4, ncomp = "auto", maxcomp = 10,
validation = "CV", segment.type ="interleaved",
output = FALSE)
#Regression Plots
range=c(0,4)
npct_S2S4<-fullS2S4$N..weight.[!is.na(fullS2S4$N..weight.)]
npct_S2<-fullS2$N..weight.[!is.na(fullS2$N..weight.)]
npct_S4<-fullS4$N..weight.[!is.na(fullS4$N..weight.)]
yvals1=cbind(S2full_npct$fitted.values[1:44],S2vis_npct$fitted.values[1:44],S2vnir_npct$fitted.values[1:44],S2swir_npct$fitted.values[1:44])
yvals2=cbind(S4full_npct$fitted.values[1:44],S4vis_npct$fitted.values[1:44],S4vnir_npct$fitted.values[1:44],S4swir_npct$fitted.values[1:44])
#Plot calls
Multi_Scatter_Plot(npct_S2S4[1:44],S2S4swir_npct$fitted.values[1:44],npct_S2S4[45:89],S2S4swir_npct$fitted.values[45:89],range,'cyan','purple','Foliar N (measured)','Foliar N (modeled)',paste(wdir,"Figures/PLSR_SWIR_Npct_S2S4_Pulse_M21.png",sep=''))
Taylor_Plot(npct_S2,yvals1,npct_S4,yvals2,'','npct_test.png')
###Spectra Plots (Correlation Coefficient)
yrange=c(-80,80)
Spectra_Plot(c(450:2450),S2full_npct$coefficients[1:2001],'black','S2 Npct','Regression Coefficient',c(1300,2450),yrange,paste(wdir,"Figures/PLSR_FullRange_SWIR_RC_Npct_S2_Pulse_M21.png",sep=''))
yrange=c(-80,80)
Spectra_Plot(c(450:2450),S4full_npct$coefficients[1:2001],'black','S4 Npct','Regression Coefficient',c(1300,2450),yrange,paste(wdir,"Figures/PLSR_FullRange_SWIR_RC_Npct_S4_Pulse_M21.png",sep=''))
###Spectra Plots (Selectivity Ratio)
yrange=c(0,0.5)
Spectra_Plot(c(450:2450),selectivityRatio(S2S4full_npct),'black','S2S4 Npct','Selectivity Ratio',c(450,1000),yrange,paste(wdir,"Figures/PLSR_FullRange_VNIR_SR_Npct_S2S4_Pulse_M21.png",sep=''))
Spectra_Plot(c(450:2450),selectivityRatio(S2full_npct),'black','S2 Npct','Selectivity Ratio',c(450,1000),yrange,paste(wdir,"Figures/PLSR_FullRange_VNIR_SR_Npct_S2_Pulse_M21.png",sep=''))
Spectra_Plot(c(450:2450),selectivityRatio(S4full_npct),'black','S4 Npct','Selectivity Ratio',c(450,1000),yrange,paste(wdir,"Figures/PLSR_FullRange_VNIR_SR_Npct_S4_Pulse_M21.png",sep=''))
Spectra_Plot(c(450:2450),selectivityRatio(S2S4full_npct),'black','S2S4 Npct','Selectivity Ratio',c(1000,2450),yrange,paste(wdir,"Figures/PLSR_FullRange_SWIR_SR_Npct_S2S4_Pulse_M21.png",sep=''))
Spectra_Plot(c(450:2450),selectivityRatio(S2full_npct),'black','S2 Npct','Selectivity Ratio',c(1000,2450),yrange,paste(wdir,"Figures/PLSR_FullRange_SWIR_SR_Npct_S2_Pulse_M21.png",sep=''))
Spectra_Plot(c(450:2450),selectivityRatio(S4full_npct),'black','S4 Npct','Selectivity Ratio',c(1000,2450),yrange,paste(wdir,"Figures/PLSR_FullRange_SWIR_SR_Npct_S4_Pulse_M21.png",sep=''))
setwd("/Users/wksmith/Documents/GitHub/SJNF_Aspen_Flux")
github_dir <- "/Users/wksmith/Documents/GitHub/SJNF_Aspen_Flux/"
library(asdreader)
library(reshape2)
library(tidyverse)
library(tidyr)
library(dplyr)
library(stringr)
#####################################TEST#######################################
master <- read.csv2(paste(github_dir,'Data/Level0/Data_Sheets/Datasheet_Dendro.csv',sep=''),sep=',',header=T)
dataset <- data.frame()
master
#####################################TEST#######################################
master <- read.csv2(paste(github_dir,'Data/Level0/Data_Sheets/Datasheet_Dendro.csv',sep=''),sep=',',header=T)
dataset <- data.frame()
master
#####################################TEST#######################################
master <- read.csv2(paste(github_dir,'Data/Level0/Data_Sheets/Datasheet_Dendro.csv',sep=''),sep=',',header=T)
master
#####################################TEST#######################################
master <- read.csv2(paste(github_dir,'Data/Level0/Data_Sheets/Datasheet_Dendro.csv',sep=''),sep=',',header=T)
dataset <- data.frame()
master
for(i in 1:length(master$File)){
file <- list.files(paste(github_dir,'/Data/Level0/',sep=''), full.names = T, pattern = paste(master$Dir[i],sep=''))
print(file)
#md<-get_metadata(file)
#temp_data<-get_spectra(file)
#data<-as.numeric(temp_data)
#wvl=as.integer(colnames(temp_data))
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$File)){
file <- paste(github_dir,'/Data/Level0/',master$Dir[i],sep='')
print(file)
#md<-get_metadata(file)
#temp_data<-get_spectra(file)
#data<-as.numeric(temp_data)
#wvl=as.integer(colnames(temp_data))
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
file <- paste(github_dir,'/Data/Level0/',master$Dir[i],sep='')
print(file)
#md<-get_metadata(file)
#temp_data<-get_spectra(file)
#data<-as.numeric(temp_data)
#wvl=as.integer(colnames(temp_data))
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
data <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''))
#md<-get_metadata(file)
#temp_data<-get_spectra(file)
#data<-as.numeric(temp_data)
#wvl=as.integer(colnames(temp_data))
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
#####################################TEST#######################################
master <- read.csv2(paste(github_dir,'Data/Level0/Data_Sheets/Datasheet_Dendro.csv',sep=''),sep=',',header=T)
setwd("/Users/wksmith/Documents/GitHub/SJNF_Aspen_Flux")
github_dir <- "/Users/wksmith/Documents/GitHub/SJNF_Aspen_Flux/"
library(reshape2)
library(tidyverse)
library(tidyr)
library(dplyr)
library(stringr)
#####################################TEST#######################################
master <- read.csv2(paste(github_dir,'Data/Level0/Data_Sheets/Datasheet_Dendro.csv',sep=''),sep=',',header=T)
dataset <- data.frame()
for(i in 1:length(master$Dir)){
data <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''))
#md<-get_metadata(file)
#temp_data<-get_spectra(file)
#data<-as.numeric(temp_data)
#wvl=as.integer(colnames(temp_data))
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
View(data)
for(i in 1:length(master$Dir)){
data <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=',',header=F)
#md<-get_metadata(file)
#temp_data<-get_spectra(file)
#data<-as.numeric(temp_data)
#wvl=as.integer(colnames(temp_data))
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
View(data)
for(i in 1:length(master$Dir)){
data <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
#md<-get_metadata(file)
#temp_data<-get_spectra(file)
#data<-as.numeric(temp_data)
#wvl=as.integer(colnames(temp_data))
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
#####################################TEST#######################################
master <- read.csv2(paste(github_dir,'Data/Level0/Data_Sheets/Datasheet_Dendro_07222025.csv',sep=''),sep=',',header=T)
dataset <- data.frame()
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
#md<-get_metadata(file)
#temp_data<-get_spectra(file)
#data<-as.numeric(temp_data)
#wvl=as.integer(colnames(temp_data))
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as.Date(file$V2)
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
View(dataset)
View(file)
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as.Date(file$V2,format="%YYYY.%m.%d")
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as.Date(file$V2,format="%YYYY.%mm.%dd")
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as.Date(file$V2,format="%Y.%m.%d %H:%M")
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as_datetime(file$V2,format="%Y.%m.%d %H:%M")
#c1=data[which(wvl==1001)]-data[which(wvl==1000)]
#c2=data[which(wvl==1800)]-data[which(wvl==1801)]
#data_c=c(data[1:which(wvl==1000)]+c1,data[which(wvl==1001):which(wvl==1800)],data[which(wvl==1801):which(wvl==2500)]+c2)
#data_s=data_c/sqrt(sum(data_c^2))
#type=rep(master$Biocrust[i],length(wvl))
#site=rep('Test',length(wvl))
#ds=cbind(wvl,data_c,type)
#dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as_datetime(file$V2,format="%Y.%m.%d %H:%M")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(wvl,data_c,type)
dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as_datetime(file$V2,format="%Y.%m.%d %H:%M")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(type,id,time,data)
dataset <- rbind(dataset,ds)
}
View(dataset)
#Name the columns
colnames(dataset) <- c("type","id","time","data")
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as_datetime(file$V2,format="%Y.%m.%d %H:%M")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(type,as.numeric(id),as.Date(time),as.numeric(data))
dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as_datetime(file$V2,format="%Y.%m.%d %H:%M")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(type,id,time,data)
dataset <- rbind(dataset,ds)
}
#Name the columns
colnames(dataset) <- c("type","id","time","data")
#Name the columns
colnames(dataset) <- c("type","id","time","data")
dataset=transform(dataset,id = as.numeric(id))
dataset=transform(dataset,data = as.numeric(data))
dataset=transform(dataset,time = as.data(time))
dataset=transform(dataset,time = as.datatime(time))
dataset=transform(dataset,time = as.Date(time))
time[1]
time[2]
ds
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as_datetime(file$V2,format="%Y.%m.%d %H:%M")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(type,id,as.Date(time),data)
dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as_datetime(file$V2,format="%Y.%m.%d %H:%M")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(type,id,time,data)
dataset <- rbind(dataset,ds)
}
time[1]
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
time<-as.POSIXct(file$V2,format="%Y.%m.%d %H:%M")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(type,id,time,data)
dataset <- rbind(dataset,ds)
}
View(dataset)
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
date<-as.POSIXct(file$V2,format="%Y.%m.%d %H:%M")
year<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%Y")
Month<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%m")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(type,id,year,data)
dataset <- rbind(dataset,ds)
}
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
year<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%Y")
Month<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%m")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(type,id,year,data)
dataset <- rbind(dataset,ds)
}
year
length(year)
length(type)
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
year<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%Y")
month<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%m")
day<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%d")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(type,id,data)
dataset <- rbind(dataset,ds)
}
setwd("/Users/wksmith/Documents/GitHub/SJNF_Aspen_Flux")
github_dir <- "/Users/wksmith/Documents/GitHub/SJNF_Aspen_Flux/"
library(reshape2)
library(tidyverse)
library(tidyr)
library(dplyr)
library(stringr)
#####################################TEST#######################################
master <- read.csv2(paste(github_dir,'Data/Level0/Data_Sheets/Datasheet_Dendro_07222025.csv',sep=''),sep=',',header=T)
dataset <- data.frame()
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
year<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%Y")
month<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%m")
day<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%d")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(type,id,data)
dataset <- rbind(dataset,ds)
}
#####################################TEST#######################################
master <- read.csv2(paste(github_dir,'Data/Level0/Data_Sheets/Datasheet_Dendro_07222025.csv',sep=''),sep=',',header=T)
dataset <- data.frame()
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
year<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%Y")
month<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%m")
day<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%d")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(year,month,day,type,id,data)
dataset <- rbind(dataset,ds)
}
View(dataset)
dataset <- data.frame()
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
year<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%Y")
month<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%m")
day<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%d")
t<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%H:%M")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(year,month,day,t,type,id,data)
dataset <- rbind(dataset,ds)
}
#Name the columns
colnames(dataset) <- c(,'year','month','day','time',"type","id","data")
#Name the columns
colnames(dataset) <- c('year','month','day','time',"type","id","data")
dataset <- data.frame()
for(i in 1:length(master$Dir)){
file <- read.csv2(paste(github_dir,'/Data/Level0/',master$Dir[i],sep=''),sep=';',header=F)
temp_data<-file$V4
data<-as.numeric(temp_data)
datetime<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%D")
year<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%Y")
month<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%m")
day<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%d")
t<-format(as.POSIXct(file$V2,format="%Y.%m.%d %H:%M"), "%H:%M")
type=rep(master$Site[i],length(data))
id=rep(master$ID[i],length(data))
ds=cbind(datetime,year,month,day,t,type,id,data)
dataset <- rbind(dataset,ds)
}
#Name the columns
colnames(dataset) <- c('datetime','year','month','day','time',"type","id","data")
View(dataset)
dataset=transform(dataset,id = as.numeric(id))
dataset=transform(dataset,data = as.numeric(data))
ggplot(dataset, aes(x=datetime,y=data,group=type,color=type)) +
geom_line(show.legend = T,linewidth=.5,linetype="solid") +
#scale_color_manual(values=c('red3','green3','cyan2','purple'))+
#geom_ribbon(aes(y = mean, ymin = mean - sd, ymax = mean + sd, fill = type), alpha = .2) +
#scale_fill_manual(values=c('red3','green3','cyan2','purple'))+
#scale_y_continuous("Reflectance") +
#scale_x_continuous("Wavelength (nm)",limits = c(400,2400), breaks = seq(400,2400,200)) +
theme_bw() +
theme(axis.text.x = element_text(angle = 45, hjust = 1, vjust = 1)) +
theme(text = element_text(size = 18))
